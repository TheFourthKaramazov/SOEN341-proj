<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">Messaging Platform Architecture</text>
  
  <!-- Client Layer -->
  <rect x="50" y="80" width="800" height="120" rx="10" ry="10" fill="#e3f2fd" stroke="#1565c0" stroke-width="2" />
  <text x="450" y="105" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Client Layer (Vue.js)</text>
  
  <!-- Client Components -->
  <rect x="100" y="130" width="140" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1565c0" stroke-width="1" />
  <text x="170" y="160" font-family="Arial" font-size="14" text-anchor="middle">App.vue</text>
  
  <rect x="260" y="130" width="140" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1565c0" stroke-width="1" />
  <text x="330" y="160" font-family="Arial" font-size="14" text-anchor="middle">Login.vue</text>
  
  <rect x="420" y="130" width="140" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1565c0" stroke-width="1" />
  <text x="490" y="160" font-family="Arial" font-size="14" text-anchor="middle">Home.vue</text>

  <rect x="580" y="130" width="140" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1565c0" stroke-width="1" />
  <text x="650" y="160" font-family="Arial" font-size="14" text-anchor="middle">WebSocket Client</text>
  
  <!-- Store Layer -->
  <rect x="50" y="220" width="800" height="100" rx="10" ry="10" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" />
  <text x="450" y="245" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">State Management (Pinia)</text>
  
  <!-- Store Components -->
  <rect x="200" y="265" width="170" height="40" rx="5" ry="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1" />
  <text x="285" y="290" font-family="Arial" font-size="14" text-anchor="middle">userStore</text>
  
  <rect x="530" y="265" width="170" height="40" rx="5" ry="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1" />
  <text x="615" y="290" font-family="Arial" font-size="14" text-anchor="middle">directMessageStore</text>
  
  <!-- API Layer -->
  <rect x="50" y="340" width="800" height="130" rx="10" ry="10" fill="#fff3e0" stroke="#e65100" stroke-width="2" />
  <text x="450" y="365" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">API Layer (FastAPI)</text>
  
  <!-- API Components -->
  <rect x="100" y="395" width="120" height="50" rx="5" ry="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1" />
  <text x="160" y="425" font-family="Arial" font-size="14" text-anchor="middle">User API</text>
  
  <rect x="240" y="395" width="120" height="50" rx="5" ry="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1" />
  <text x="300" y="425" font-family="Arial" font-size="14" text-anchor="middle">Direct Message API</text>
  
  <rect x="380" y="395" width="120" height="50" rx="5" ry="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1" />
  <text x="440" y="425" font-family="Arial" font-size="14" text-anchor="middle">Channel API</text>
  
  <rect x="520" y="395" width="120" height="50" rx="5" ry="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1" />
  <text x="580" y="425" font-family="Arial" font-size="14" text-anchor="middle">Channel Message API</text>
  
  <rect x="660" y="395" width="120" height="50" rx="5" ry="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1" />
  <text x="720" y="425" font-family="Arial" font-size="14" text-anchor="middle">WebSocket API</text>
  
  <!-- WebSocket Connections -->
  <rect x="50" y="490" width="800" height="100" rx="10" ry="10" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" />
  <text x="450" y="515" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Real-time Communication</text>
  
  <rect x="250" y="535" width="150" height="40" rx="5" ry="5" fill="#e1bee7" stroke="#7b1fa2" stroke-width="1" />
  <text x="325" y="560" font-family="Arial" font-size="14" text-anchor="middle">Direct Messaging</text>
  
  <rect x="500" y="535" width="150" height="40" rx="5" ry="5" fill="#e1bee7" stroke="#7b1fa2" stroke-width="1" />
  <text x="575" y="560" font-family="Arial" font-size="14" text-anchor="middle">Channel Messaging</text>
  
  <!-- Database Layer -->
  <rect x="50" y="610" width="800" height="70" rx="10" ry="10" fill="#e1f5fe" stroke="#0277bd" stroke-width="2" />
  <text x="450" y="635" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Data Layer (SQLite)</text>
  
  <!-- Tables Components -->
  <rect x="100" y="650" width="100" height="30" rx="5" ry="5" fill="#b3e5fc" stroke="#0277bd" stroke-width="1" />
  <text x="150" y="670" font-family="Arial" font-size="12" text-anchor="middle">Users</text>
  
  <rect x="210" y="650" width="120" height="30" rx="5" ry="5" fill="#b3e5fc" stroke="#0277bd" stroke-width="1" />
  <text x="270" y="670" font-family="Arial" font-size="12" text-anchor="middle">Direct Messages</text>
  
  <rect x="340" y="650" width="120" height="30" rx="5" ry="5" fill="#b3e5fc" stroke="#0277bd" stroke-width="1" />
  <text x="400" y="670" font-family="Arial" font-size="12" text-anchor="middle">Channels</text>
  
  <rect x="470" y="650" width="120" height="30" rx="5" ry="5" fill="#b3e5fc" stroke="#0277bd" stroke-width="1" />
  <text x="530" y="670" font-family="Arial" font-size="12" text-anchor="middle">Channel Messages</text>
  
  <rect x="600" y="650" width="120" height="30" rx="5" ry="5" fill="#b3e5fc" stroke="#0277bd" stroke-width="1" />
  <text x="660" y="670" font-family="Arial" font-size="12" text-anchor="middle">User Channels</text>
  
  <!-- Connection lines with arrows and labels -->
  <!-- Vue components to Store -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2196F3" />
    </marker>
  </defs>
  
  <!-- Client to Store connections -->
  <path d="M 170 180 Q 200 220 285 265" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="180" y="220" font-family="Arial" font-size="10" fill="#2196F3">User data</text>
  
  <path d="M 330 180 Q 320 230 285 265" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="290" y="220" font-family="Arial" font-size="10" fill="#2196F3">Auth data</text>
  
  <path d="M 490 180 Q 520 220 615 265" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="520" y="220" font-family="Arial" font-size="10" fill="#2196F3">Message data</text>
  
  <path d="M 650 180 Q 640 220 615 265" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="600" y="220" font-family="Arial" font-size="10" fill="#2196F3">Real-time data</text>
  
  <!-- Store to API connections -->
  <path d="M 285 305 Q 240 350 160 395" stroke="#4CAF50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="200" y="350" font-family="Arial" font-size="10" fill="#4CAF50">Auth requests</text>
  
  <path d="M 615 305 Q 500 350 300 395" stroke="#4CAF50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="450" y="335" font-family="Arial" font-size="10" fill="#4CAF50">DM requests</text>
  
  <path d="M 615 305 Q 550 350 440 395" stroke="#4CAF50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="510" y="335" font-family="Arial" font-size="10" fill="#4CAF50">Channel requests</text>
  
  <path d="M 615 305 Q 600 350 580 395" stroke="#4CAF50" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="570" y="350" font-family="Arial" font-size="10" fill="#4CAF50">Channel messages</text>
  
  <!-- WebSocket Client to WebSocket API -->
  <path d="M 650 180 Q 690 280 720 395" stroke="#9C27B0" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="685" y="280" font-family="Arial" font-size="10" fill="#9C27B0">WebSocket connection</text>
  
  <!-- API to WebSocket Connections -->
  <path d="M 300 445 Q 310 490 325 535" stroke="#FF5722" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="280" y="490" font-family="Arial" font-size="10" fill="#FF5722">Direct messages</text>
  
  <path d="M 580 445 Q 580 490 575 535" stroke="#FF5722" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="590" y="490" font-family="Arial" font-size="10" fill="#FF5722">Channel messages</text>
  
  <path d="M 720 445 Q 650 490 575 535" stroke="#FF5722" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="650" y="475" font-family="Arial" font-size="10" fill="#FF5722">Real-time channel</text>
  
  <path d="M 720 445 Q 500 480 325 535" stroke="#FF5722" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="500" y="475" font-family="Arial" font-size="10" fill="#FF5722">Real-time direct</text>
  
  <!-- API to Database -->
  <path d="M 160 445 Q 155 545 150 650" stroke="#0277BD" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="120" y="545" font-family="Arial" font-size="10" fill="#0277BD">User CRUD</text>
  
  <path d="M 300 445 Q 290 545 270 650" stroke="#0277BD" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="250" y="545" font-family="Arial" font-size="10" fill="#0277BD">DM CRUD</text>
  
  <path d="M 440 445 Q 420 545 400 650" stroke="#0277BD" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="380" y="545" font-family="Arial" font-size="10" fill="#0277BD">Channel CRUD</text>
  
  <path d="M 580 445 Q 560 545 530 650" stroke="#0277BD" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="520" y="545" font-family="Arial" font-size="10" fill="#0277BD">Channel Message CRUD</text>
  
  <path d="M 440 445 Q 550 545 660 650" stroke="#0277BD" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="580" y="580" font-family="Arial" font-size="10" fill="#0277BD">User-Channel mapping</text>
</svg>
